set $left H
set $right L
set $up K
set $down J
set $mod Mod4
set $term foot
set $wallpaper_path time
set $bin_path $HOME/.local/bin

set $rosewater #f5e0dc
set $flamingo #f2cdcd
set $pink #f5c2e7
set $mauve #cba6f7
set $red #f38ba8
set $maroon #eba0ac
set $peach #fab387
set $yellow #f9e2af
set $green #a6e3a1
set $teal #94e2d5
set $sky #89dceb
set $sapphire #74c7ec
set $blue #89b4fa
set $lavender #b4befe
set $text #cdd6f4
set $subtext1 #bac2de
set $subtext0 #a6adc8
set $overlay2 #9399b2
set $overlay1 #7f849c
set $overlay0 #6c7086
set $surface2 #585b70
set $surface1 #45475a
set $surface0 #313244
set $base #1e1e2e
set $mantle #181825
set $crust #11111b

exec systemctl --user import-environment WAYLAND_DISPLAY DISPLAY XDG_CURRENT_DESKTOP SWAYSOCK
exec dbus-update-activation-environment --all
exec $bin_path/xdg_desktop_portal &

exec brightnessctl --save
exec wl-paste --type text --watch cliphist store &
exec wl-paste --type image --watch cliphist store &

exec waybar &
exec swaync &
exec $bin_path/idle daemon &
exec $bin_path/wallpaper daemon $wallpaper_path &
exec $bin_path/polkit

exec $bin_path/open_app foot
exec $bin_path/open_app /opt/zen/zen

exec fcitx5 &
exec udiskie -t --appindicator &
exec flameshot &

xwayland enable
default_border pixel 1
default_floating_border pixel 1
smart_borders off
floating_minimum_size 600 x 450 
focus_follows_mouse yes
focus_on_window_activation smart
focus_wrapping no
gaps inner 4
gaps outer 0
smart_gaps off
mouse_warping container
tiling_drag enabled
workspace_auto_back_and_forth no
floating_modifier $mod
client.focused           $surface0 $base $text  $surface0 $surface0
client.focused_inactive  $base     $base $text  $base $base
client.unfocused         $base     $base $text  $base $base
client.background        $base

output * scale 1 
output Virtual-1 res 1440x900

input "type:keyboard" {
    xkb_layout us
    xkb_variant ,
    xkb_options caps:swapescape
}

input "type:pointer" {
    drag enabled
    dwt enabled
    drag_lock enabled
    natural_scroll enabled
    scroll_factor 0.40
    pointer_accel 0.15
    accel_profile flat
}

input "type:touchpad" {
    tap enabled
    drag enabled
    dwt enabled
    drag_lock enabled
    natural_scroll enabled
    scroll_factor 0.20
    scroll_method two_finger
    accel_profile flat
    pointer_accel 0.15
}

bindsym --to-code {
    $mod+SHIFT+R reload
    $mod+E fullscreen
    $mod+T floating toggle
    $mod+M focus mode_toggle
    $mod+N focus next
    $mod+SHIFT+N focus prev
    $mod+W layout toggle splitv splith
    $mod+SHIFT+W split toggle
    $mod+ALT+Q kill

    $mod+$left focus left
    $mod+$right focus right
    $mod+$up focus up
    $mod+$down focus down

    $mod+ALT+$left move left
    $mod+ALT+$right move right
    $mod+ALT+$up move up
    $mod+ALT+$down move down

    $mod+SHIFT+$left resize shrink width 10px
    $mod+SHIFT+$right resize grow width 10px
    $mod+SHIFT+$down resize grow height 10px
    $mod+SHIFT+$up resize shrink height 10px
}

bindsym --to-code $mod+Return exec $bin_path/open_app $term
bindsym --to-code $mod+B exec $bin_path/open_app zen
bindsym --to-code $mod+I exec $bin_path/idle toggle
bindsym --to-code $mod+P exec $bin_path/open_app flameshot gui
bindsym --to-code $mod+SHIFT+P exec $bin_path/open_app flameshot screen
bindsym --to-code $mod+SHIFT+B exec pkill waybar || exec waybar
bindsym --to-code --locked $mod+ALT+Space exec swaymsg input 'type:keyboard' xkb_switch_layout next
bindsym $mod+ALT+Escape exec $bin_path/wallpaper apply $wallpaper_path
bindsym $mod+SHIFT+Escape exec $bin_path/lock

bindsym --to-code $mod+Space exec pkill rofi || \
	rofi -show drun \
		-show-icons

bindsym --to-code $mod+Slash exec pkill rofi || \
	rofi -show calc \
		-theme "$HOME/.config/rofi/themes/calculator.rasi"

bindsym --to-code $mod+Period exec pkill rofi || \
	cliphist list | \
	rofi -dmenu \
		-p "ïƒª" \
		-display-columns 2 \
		-theme "$HOME/.config/rofi/themes/cliphist.rasi" | \
		cliphist decode | wl-copy

bindsym --to-code $mod+SHIFT+Period exec pkill rofi || \
	rofi -show emoji \
		-emoji-format '{emoji}' \
		-kb-secondary-copy "" \
		-kb-custom-1 Ctrl+c \
		-theme "$HOME/.config/rofi/themes/emoji.rasi"

bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10
bindsym --to-code $mod+G workspace back_and_forth
bindgesture swipe:4:left workspace next
bindgesture swipe:4:right workspace prev

bindsym $mod+SHIFT+1 move workspace 1, workspace 1 
bindsym $mod+SHIFT+2 move workspace 2, workspace 2 
bindsym $mod+SHIFT+3 move workspace 3, workspace 3 
bindsym $mod+SHIFT+4 move workspace 4, workspace 4 
bindsym $mod+SHIFT+5 move workspace 5, workspace 5 
bindsym $mod+SHIFT+6 move workspace 6, workspace 6 
bindsym $mod+SHIFT+7 move workspace 7, workspace 7 
bindsym $mod+SHIFT+8 move workspace 8, workspace 8 
bindsym $mod+SHIFT+9 move workspace 9, workspace 9 
bindsym $mod+SHIFT+0 move workspace 10, workspace 10

bindsym XF86MonBrightnessUp exec brightnessctl -s set +5% -n 1% 
bindsym XF86MonBrightnessDown exec brightnessctl -s set 5%- -n 1%
bindsym SHIFT+XF86MonBrightnessUp exec brightnessctl -s set +1% -n 1%
bindsym SHIFT+XF86MonBrightnessDown exec brightnessctl -s set 1%- -n 1%

bindsym XF86AudioRaiseVolume exec wpctl set-volume -l 1.5 @DEFAULT_SINK@ 5%+
bindsym XF86AudioLowerVolume exec wpctl set-volume -l 1.5 @DEFAULT_SINK@ 5%-
bindsym SHIFT+XF86AudioRaiseVolume exec wpctl set-volume -l 1.5 @DEFAULT_SINK@ 1%+
bindsym SHIFT+XF86AudioLowerVolume exec wpctl set-volume -l 1.5 @DEFAULT_SINK@ 1%-
bindsym XF86AudioMute exec wpctl set-mute @DEFAULT_SINK@ toggle
bindsym XF86AudioMicMute exec wpctl set-mute @DEFAULT_SOURCE@ toggle

for_window [shell="xwayland" window_type="splash"] floating enable
for_window [shell="xwayland" window_type="dialog"] floating enable
for_window [shell="xwayland" window_type="splash"] floating enable
for_window [shell="xwayland" window_type="menu"] floating enable
for_window [shell="xwayland" window_type="dropdown_menu"] floating enable
for_window [shell="xwayland" window_type="tooltip"] floating enable
for_window [shell="xwayland" window_role="popup_menu"] floating enable
for_window [shell="xwayland" class="Pinentry-gtk"] floating enable
for_window [app_id="gnome-keyring-prompt"] floating enable
for_window [app_id="polkit"] floating enable
for_window [app_id="foot"] move container workspace 1
for_window [app_id="zen"] {
    inhibit_idle focus
    move container workspace 2
}
for_window [app_id="firefox"] {
    inhibit_idle focus
    move container workspace 2
}
for_window [app_id="chromium"] {
    inhibit_idle focus
    move container workspace 2
}
for_window [app_id="pavucontrol"] {
    floating enable
    resize set 800px 600px
}
for_window [app_id="blueman-manager"] {
    floating enable
    resize set 800px 600px
}
